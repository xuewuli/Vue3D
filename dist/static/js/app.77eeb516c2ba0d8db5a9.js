webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("7+uW"),o=i("hV/q"),s=i("Gu7T"),r=i.n(s),a=i("woOf"),h=i.n(a),c=i("Ml+6"),l=i("BMSc"),u=new c.d;var d=function(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),p={antialias:!0,alpha:!0},m={props:{src:{type:String},width:{type:Number},height:{type:Number},position:{type:Object,default:function(){return{x:0,y:0,z:0}}},rotation:{type:Object,default:function(){return{x:0,y:0,z:0}}},scale:{type:Object,default:function(){return{x:1,y:1,z:1}}},lights:{type:Array,default:function(){return[]}},cameraPosition:{type:Object,default:function(){return{x:0,y:0,z:0}}},cameraRotation:{type:Object,default:function(){return{x:0,y:0,z:0}}},cameraUp:{type:Object},cameraLookAt:{type:Object},backgroundColor:{default:16777215},backgroundAlpha:{type:Number,default:1},controlsOptions:{type:Object},crossOrigin:{default:"anonymous"},glOptions:{type:Object}},data:function(){return{suportWebGL:d,size:{width:this.width,height:this.height},object:null,raycaster:new c._1,mouse:new c._14,camera:new c.S(45,1,.01,1e5),scene:new c._3,wrapper:new c.Q,renderer:null,controls:null,allLights:[],clock:"undefined"==typeof performance?Date:performance,reqId:null}},computed:{hasListener:function(){var t=this._events,e={};return["on-mousemove","on-mouseup","on-mousedown","on-click"].forEach(function(i){e[i]=!!t[i]&&t[i].length>0}),e}},mounted:function(){void 0!==this.width&&void 0!==this.height||(this.size={width:this.$el.offsetWidth,height:this.$el.offsetHeight});var t=h()({},p,this.glOptions,{canvas:this.$refs.canvas});this.renderer=new c._17(t),this.renderer.shadowMap.enabled=!0,this.controls=new l.a(this.camera,this.$el),this.controls.type="orbit",this.scene.add(this.wrapper),this.load(),this.update(),this.$el.addEventListener("mousedown",this.onMouseDown,!1),this.$el.addEventListener("mousemove",this.onMouseMove,!1),this.$el.addEventListener("mouseup",this.onMouseUp,!1),this.$el.addEventListener("click",this.onClick,!1),window.addEventListener("resize",this.onResize,!1),this.animate()},beforeDestroy:function(){cancelAnimationFrame(this.reqId),this.scene.dispose(),this.renderer.dispose(),this.controls&&this.controls.dispose(),this.$el.removeEventListener("mousedown",this.onMouseDown,!1),this.$el.removeEventListener("mousemove",this.onMouseMove,!1),this.$el.removeEventListener("mouseup",this.onMouseUp,!1),this.$el.removeEventListener("click",this.onClick,!1),window.removeEventListener("resize",this.onResize,!1)},watch:{src:function(){this.load()},rotation:{deep:!0,handler:function(t){this.object&&this.object.rotation.set(t.x,t.y,t.z)}},position:{deep:!0,handler:function(t){this.object&&this.object.position.set(t.x,t.y,t.z)}},scale:{deep:!0,handler:function(t){this.object&&this.object.scale.set(t.x,t.y,t.z)}},lights:{deep:!0,handler:function(){this.updateLights()}},size:{deep:!0,handler:function(){this.updateCamera(),this.updateRenderer()}},controlsOptions:{deep:!0,handler:function(){this.updateControls()}},backgroundAlpha:function(){this.updateRenderer()},backgroundColor:function(){this.updateRenderer()}},methods:{onResize:function(){var t=this;void 0!==this.width&&void 0!==this.height||this.$nextTick(function(){t.size={width:t.$el.offsetWidth,height:t.$el.offsetHeight}})},onMouseDown:function(t){if(this.hasListener["on-mousedown"]){var e=this.pick(t.clientX,t.clientY);this.$emit("on-mousedown",e)}},onMouseMove:function(t){if(this.hasListener["on-mousemove"]){var e=this.pick(t.clientX,t.clientY);this.$emit("on-mousemove",e)}},onMouseUp:function(t){if(this.hasListener["on-mouseup"]){var e=this.pick(t.clientX,t.clientY);this.$emit("on-mouseup",e)}},onClick:function(t){if(this.hasListener["on-click"]){var e=this.pick(t.clientX,t.clientY);this.$emit("on-click",e)}},pick:function(t,e){if(!this.object)return null;var i=this.$el.getBoundingClientRect(),n=t-i.left,o=e-i.top;this.mouse.x=n/this.size.width*2-1,this.mouse.y=-o/this.size.height*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var s=this.raycaster.intersectObject(this.object,!0);return(s&&s.length)>0?s[0]:null},update:function(){this.updateRenderer(),this.updateCamera(),this.updateLights(),this.updateControls()},updateModel:function(){var t=this.object;if(t){var e=this.position,i=this.rotation,n=this.scale;t.position.set(e.x,e.y,e.z),t.rotation.set(i.x,i.y,i.z),t.scale.set(n.x,n.y,n.z)}},updateRenderer:function(){var t=this.renderer;t.setSize(this.size.width,this.size.height),t.setPixelRatio(window.devicePixelRatio||1),t.setClearColor(new c.h(this.backgroundColor).getHex()),t.setClearAlpha(this.backgroundAlpha)},updateCamera:function(){var t=this.camera,e=this.object;if(t.aspect=this.size.width/this.size.height,t.updateProjectionMatrix(),this.cameraLookAt||this.cameraUp)t.position.set(this.cameraPosition.x,this.cameraPosition.y,this.cameraPosition.z),t.rotation.set(this.cameraRotation.x,this.cameraRotation.y,this.cameraRotation.z),t.up.set(this.cameraUp.x,this.cameraUp.y,this.cameraUp.z),t.lookAt(new c._15(this.cameraLookAt.x,this.cameraLookAt.y,this.cameraLookAt.z));else{if(!e)return;var i=function(t){return u.setFromObject(t),u.getSize(new c._15)}(e).length();t.position.set(this.cameraPosition.x,this.cameraPosition.y,this.cameraPosition.z),t.rotation.set(this.cameraRotation.x,this.cameraRotation.y,this.cameraRotation.z),0===this.cameraPosition.x&&0===this.cameraPosition.y&&0===this.cameraPosition.z&&(t.position.z=i),t.lookAt(new c._15)}},updateLights:function(){var t,e=this;(t=this.scene).remove.apply(t,r()(this.allLights)),this.allLights=[],this.lights.forEach(function(t){if(t.type){var i=t.type.toLowerCase(),n=null;if("ambient"===i||"ambientlight"===i){var o=0===t.color?t.color:t.color||4210752,s=0===t.intensity?t.intensity:t.intensity||1;n=new c.a(o,s)}else if("point"===i||"pointlight"===i){var r=0===t.color?t.color:t.color||16777215,a=0===t.intensity?t.intensity:t.intensity||1,h=t.distance||0,l=0===t.decay?t.decay:t.decay||1;n=new c.T(r,a,h,l),t.position&&n.position.copy(t.position)}else if("directional"===i||"directionallight"===i){var u=0===t.color?t.color:t.color||16777215,d=0===t.intensity?t.intensity:t.intensity||1;n=new c.i(u,d),t.position&&n.position.copy(t.position),t.target&&n.target.copy(t.target)}else if("hemisphere"===i||"hemispherelight"===i){var p=0===t.groundColor?t.groundColor:t.groundColor||16777215,m=0===t.skyColor?t.skyColor:t.skyColor||16777215,f=0===t.intensity?t.intensity:t.intensity||1;n=new c.o(m,p,f),t.position&&n.position.copy(t.position)}e.allLights.push(n),e.scene.add(n)}})},updateControls:function(){this.controlsOptions&&h()(this.controls,this.controlsOptions)},load:function(){var t=this;this.src&&(this.object&&this.wrapper.remove(this.object),this.loader.load(this.src,function(){var e=t.getObject.apply(t,arguments);t.process&&t.process(e),t.addObject(e),t.$emit("on-load")},function(e){t.$emit("on-progress",e)},function(e){t.$emit("on-error",e)}))},getObject:function(t){return t},addObject:function(t){var e=function(t){return u.setFromObject(t),u.getCenter(new c._15)}(t);this.wrapper.position.copy(e.negate()),this.object=t,this.wrapper.add(t),this.updateCamera(),this.updateModel()},animate:function(){this.reqId=requestAnimationFrame(this.animate),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{width:"100%",height:"100%",margin:"0",border:"0",padding:"0"}},[this.suportWebGL?e("canvas",{ref:"canvas",staticStyle:{width:"100%",height:"100%"}}):e("div",[this._t("default",[this._v("\n      Your browser does not seem to support "),e("a",{staticStyle:{color:"#000"},attrs:{href:"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation"}},[this._v("WebGL")]),this._v("."),e("br"),this._v("'\n    ")])],2)])},staticRenderFns:[]},y={name:"model-gltf",mixins:[i("VU/8")(m,f,!1,null,null,null).exports],props:{lights:{type:Array,default:function(){return[{type:"AmbientLight",color:11184810},{type:"DirectionalLight",position:{x:1,y:1,z:1},color:16777215,intensity:.8}]}}},data:function(){var t=new o.a;return t.setCrossOrigin(this.crossOrigin),{loader:t}},methods:{load:function(){var t=this;this.src&&(this.object&&this.wrapper.remove(this.object),this.loader.load(this.src,function(e){t.addObject(e.scene),t.$emit("on-load")},function(e){t.$emit("on-progress",e)},function(e){t.$emit("on-error",e)}))}}},g=i("VU/8")(y,null,!1,null,null,null).exports,v={components:{ModelGltf:g},name:"App"},w={render:function(){var t=this.$createElement;return(this._self._c||t)("model-gltf",{attrs:{src:"static/Duck.glb"}})},staticRenderFns:[]};var b=i("VU/8")(v,w,!1,function(t){i("r5RF")},null,null).exports;n.a.config.productionTip=!1,new n.a({el:"#app",components:{App:b},template:"<App/>"})},r5RF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.77eeb516c2ba0d8db5a9.js.map